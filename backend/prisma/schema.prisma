datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
generator client {
  provider = "prisma-client-js"
}


enum MovementType {
  DEPOSIT   // aporte
  WITHDRAW  // resgate
}

model Account {
  id        Int      @id @default(autoincrement())
  name      String   @default("Conta Principal")
  createdAt DateTime @default(now())

  pockets   Pocket[]
  tx        Transaction[]
}

model Transaction {
  id          Int      @id @default(autoincrement())
  accountId   Int
  kind        String   // "INCOME" ou "EXPENSE" (a gente pode virar enum depois)
  description String
  amount      Decimal  @db.Decimal(12, 2)
  date        DateTime
  createdAt   DateTime @default(now())

  account Account @relation(fields: [accountId], references: [id])
}

model Pocket {
  id          Int      @id @default(autoincrement())
  accountId   Int
  name        String

  // taxa mensal que você define (ex: 0.0095 = 0,95% ao mês)
  monthlyRate Decimal  @db.Decimal(10, 6)

  createdAt   DateTime @default(now())

  account   Account          @relation(fields: [accountId], references: [id])
  movements PocketMovement[]
}

model PocketMovement {
  id        Int          @id @default(autoincrement())
  pocketId  Int
  type      MovementType
  amount    Decimal      @db.Decimal(12, 2)
  date      DateTime
  createdAt DateTime     @default(now())

  pocket Pocket @relation(fields: [pocketId], references: [id])
}
